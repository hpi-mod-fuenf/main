
	\section{Produkteinsatz}
	Im folgenden wird der wesentliche Problembereich um eine effiziente, reibungslose, und sichere Gesamtkoordination zu erreichen beschrieben.\\

Zuallererst muss das automatische Fahren im zweidimensionalen Koordinatensystem zu einem angegebenen Zielpunkt fehlerfrei möglich sein. 
	Die autonome Steuerung des Roboters muss in der Lage sein, unerwarteten Ereignissen und Hindernissen zu begegnen und diese erfolgreich und unfallfrei zu umfahren. Hindernisse können dabei statisch oder beweglich sein.\\
	
Als zweite Herausforderung gilt es einen möglichst reibungs- und unterbrechungslosen Batteriebetrieb zu garantieren, um zeitlich vorausschauendes Fahren zu ermöglichen. Im Falle eines niedrigen Batteriestands muss also unverzüglich eine Ladestation angefahren werden um aufzuladen. Außerdem sollen längere Fahrten nicht von Robotern entgegengenommen werden können, deren Akkustand nicht ausreicht um diese Fahrt ergolgreich zu absolvieren.\\

Im dritten Punkt geht es darum, einen Ablauf zu modellieren, für den unglücklichen Fall, dass ein Roboter kaputt gehen sollte. Dies könnte zum Beispiel in einem Unfall passieren.\\

Taxikunden können über eine Serviceapp Anfragen an das System schicken. Das System verwaltet eine Warteschleife, in die neue Aufträge aufgenommen werden. Andererseits können Kunden jederzeit ihre Anfrage abbrechen. Der Server muss die Aufträge in der Warteschleife effizient verteilen, im Speziellen muss eine Priorisierung der Roboter stattfinden, damit jedem Krankentransporter vor dem Taxiservice ein reibungsloser Fahrtverlauf garantiert wird.\\

Die Roboter müssen unter bestimmten Kriterien wie Nähe und Batteriestand vom Server ausgewählt werden, und es gilt einzugrenzen, inwieweit die Kriterien wiederum Einfluss auf die Entscheidung des Servers nehmen.\\

Wenn ein Roboter bei einem Patienten oder einem Kunden angekommen ist, müssen wiederum Patient und mögliche Helfende bzw. der Fahrtgast benachrichtigt werden. Außerdem muss das Fahrverhalten bzw. die Geschwindigkeit an einen Transport mit Patienten angepasst werden.\\

An die Punkte anknüpfend wird mit folgenden Annahmen gearbeitet:
\begin{enumerate}
	\item Wir starten das System mit vollgeladenen Akkus für jeden Roboter
	\item Es existiert genau ein Hospital
	\item Die Kommunikation funktioniert zuverlässig, insbesondere kommen alle gesendeten \textit{Messages} auch bei dem Empfänger ungeschädigt an.
	\item Zur Vereinfachung des Fahrverhalten muss jedes Zielobjekt physisch erreichbar sein. Ziele sind dementsprechend keine Hindernisse, das Gleiche gilt für Ladestationen.
	\item Roboter können autark vom Server agieren, damit ihre Ziele bestimmen und eine Ladestation anfahren.
	\item Bei den beweglichen Objekten wird davon ausgegangen, dass es sich im Verkehrsbetrieb ausschließlich um andere Roboter handelt. 
	Für die unbeweglichen Objekte ist es notwendig, dass ihre Position unveränderlich ist.
	\item Da der Taxiservice alle Transporte in der Großstadt übernimmt, laufen keine Menschen wahllos durch die Gegend, die das Koordinationssystem der Roboter stören könnten. 
\end{enumerate}


		\subsection{Glossar}

		% \begin{description}
		% 	\item[Robot]{Roboter, der sich im 2-Dimensionalen Raum bewegen kann.}
		% 	\item[Server]{Verteilt Aufträge an die Roboter}
		% 	\item[Charger]{Ladestation für den Roboter}
		% 	\item[Destination]{Vom Server verwaltete Ziele, die der Roboter ansteuern kann.}
		% 	\item[Obstacle]{Hindernisse, die der Roboter erkennt und umfährt.}
		% \end{description}

		\input{2_glossar}
		
		
		\subsection{Modell des Problembereichs}
		Abbildung \ref{fig:2-3-modell-problembereich} zeigt ein Klassendiagramm, welches das Modell des Problembereichs grafisch darstellt.
		\begin{figure}[H]
			\centering
			\includegraphics[width=0.8\textwidth]{img/1-Analyse-2}
			\caption{Klassendiagramm des Problembereichs}
			\label{fig:2-3-modell-problembereich}
		\end{figure}

		\subsection{Beschreibung der Geschäftsprozesse}

			\subsubsection*{Beschreibung zu 1: Choose Robot}

			\begin{table}[H]
				\centering
				\begin{tabularx}{\textwidth}{|p{3cm}|X|}
				\hline
				\textbf{Auslösendes Ereignis:} & Der Server will den für ein bestimmtes Ziel bestmöglichen Roboter auswählen und diesen zum Ziel schicken. \\ \hline
				\textbf{Ergebnis:} & Alle Roboter haben ihre Sensordaten ausgelesen und diese dem Server
				mitgeteilt. 
				Daraufhin hat der Server einen Roboter ausgewählt, der für
				die Zielanfahrung optimal geeignet ist, und diesem den Auftrag zum
				Anfahren des Ziels übermittelt. \\ \hline
				\textbf{Mitwirkende:} &	Server, Roboter \\
				\hline
				\end{tabularx}
				\label{tab:2-4-choose-robot}
			\end{table}

			Abbildung \ref{fig:2-4-choose-robot-aktivitaetendiagramm} zeigt ein Aktivitätendiagramm, welches den Ablauf des Geschäftsprozesses \emph{1: Choose Robot} darstellt.
			\begin{figure}[H]
				\centering
				\includegraphics[width=\textwidth]{img/1-Analyse-3-Choose_Robot}
				\caption{Illustration von \emph{1: Choose Robot} durch Aktivitätendiagramm}
				\label{fig:2-4-choose-robot-aktivitaetendiagramm}
			\end{figure}

			Um den für ein gegebenes Ziel bestmöglichen \emph{Robot} auszuwählen, sendet
			der \emph{Server} zunächst an alle \emph{Robots} eine Anfrage (\emph{request}),
			woraufhin die \emph{Robots} ihre Sensordaten (\emph{sensor data}) auslesen und
			an den \emph{Server} senden. Auf Grundlage dieser Daten wählt der \emph{Server} den
			\emph{Robot} aus, der für die Erfüllung des Zieles am besten geeignet ist. 
			Es kann auch vorkommen, dass kein \emph{Robot} geeignet ist, um ein Ziel zu erfüllen. 
			Wie die Sensordaten und der Algorithmus zur Wahl des optimalen \emph{Robots} konkret definiert sind, ist eine Entwurfsentscheidung.

			\subsubsection*{Beschreibung zu 2: Drive to Destination}

			\begin{table}[H]
				\centering
				\begin{tabularx}{\textwidth}{|p{3cm}|X|}
				\hline
				\textbf{Auslösendes Ereignis:} & Ein \emph{Robot} hat eine \emph{Destination} erhalten.\\ \hline
				\textbf{Ergebnis:} & Der \emph{Robot} ist unter Umfahrung von womöglichen \emph{Obstacles} zur \emph{Destination} gefahren.\\ \hline
				\textbf{Mitwirkende:} &	Ein einzelner, autonomer \emph{Robot}. \\
				\hline
				\end{tabularx}
				\label{tab:2-4-drive-to-destination}
			\end{table}
			
			\emph{Aufgrund des in der Analyse nicht näher spezifizierten Ablaufs von \emph{Drive to Destination} 
			entfällt hier ein Aktivitätendiagramm.}

			Dieser Prozess wird autonom vom \emph{Robot} ausgeführt. 
			Er wird genau dann ausgeführt, wenn der Roboter einen \emph{Task} vom Server erhalten hat, den er erfüllen soll. 
			Dabei wird vorher festgelegt, mit welcher Geschwindigkeit der \emph{Robot} die in dem \texttt{Task} enthaltene(n) \emph{Destination(s)} jeweils anfahren soll. 
			Damit können bei einem Auftrag vom \emph{Hospital} Patienten schnell erreicht werden und sicher zur Klinik gebracht werden. 
			Da der \emph{Robot} an dieser Stelle dem Server schon bestätigt hat, dass sein Akkustand für die Ausführung des \emph{Tasks} ausreichend ist, 
			ist der einzige Sonderfall, den wir betrachten müssen, dass ein \emph{Obstacle} auf der direkten Linie zwischen \emph{Robot} und \emph{Destination} liegt. 
			Dann wird der \emph{Robot} nach Wahl des besten Umweges das \emph{Obstacle} umfahren und wieder die Fahrt zur \emph{Destination} aufnehmen.

			\subsubsection*{Beschreibung zu 3: Take Patient to Hospital}

			\begin{table}[H]
				\centering
				\begin{tabularx}{\textwidth}{|p{3cm}|X|}
				\hline
				\textbf{Auslösendes Ereignis:} & Das \emph{Hospital} hat einen neuen Patienten registriert.\\ \hline
				\textbf{Ergebnis:} & Der Robot ist zum \emph{Patient} gefahren, dieser wurde von Helfenden auf den \emph{Robot} geladen 
				und der \emph{Robot} hat den \emph{Patient} zum \emph{Hospital} zurück gebracht.\\ \hline
				\textbf{Mitwirkende:} &	Ein einzelner, autonomer \emph{Robot}, der \emph{Server} und das \emph{Hospital}. \\
				\hline
				\end{tabularx}
				\label{tab:2-4-take-patient-to-hospital}
			\end{table}

			Abbildung \ref{fig:2-4-take-patient-to-hospital-aktivitaetendiagramm} zeigt ein Aktivitätendiagramm, welches den Ablauf des Geschäftsprozesses \emph{3: Take Patient to Hospital} darstellt.

			Um die Verfügbarkeit eines \emph{Robots} anzufragen gibt das \emph{Hospital} die Adresse des \emph{Patient} an den \emph{Server}. 
			Dieser wählt dann den passenden \emph{Robot} aus. 
			Falls keiner verfügbar ist, lehnt der \emph{Server} den Krankentransport ab, anderenfalls wird dem \emph{Robot} dieser \emph{Task} zugewiesen. 
			Darauf fährt der \emph{Robot} zum \emph{Patient}, wenn er angekommen ist, gibt er das über den \emph{Server} ans \emph{Krankenhaus} weiter und wartet bis die Helfenden den \emph{Patient} aufgeladen haben. 
			Nach dem Aufladen informiert das \emph{Hospital} den \emph{Robot} und wartet selber bis der \emph{Patient} am \emph{Hospital} angekommen ist. 
			Darauf fährt der \emph{Robot} zum \emph{Hospital} und wartet bis der \emph{Patient} abgeladen ist. 
			Danach ist er wieder für alle weiteren \emph{Tasks} verfügbar.
			
			\begin{figure}[H]
				\centering
				\includegraphics[width=1.4\textwidth, angle=90]{img/1-Analyse-2-Geschaeftsprozess_TakePatientToHospital}
				\caption{Illustration von \emph{3: Take Patient to Hospital} durch Aktivitätendiagramm}
				\label{fig:2-4-take-patient-to-hospital-aktivitaetendiagramm}
			\end{figure}
	\pagebreak

	
